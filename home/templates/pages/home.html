{% extends "pages/base.html" %}
{% block title %}Home {% endblock %} 
{% block content %}     
{% csrf_token %}
<div class="container-xl">
    <div class="table-responsive">
        <div class="table-wrapper">
            <div class="table-title">
                <div class="row">
                    <div class="search-box">
                        <i class="material-icons">&#xE8B6;</i>
                        <input type="text" class="form-control" placeholder="Search&hellip;">
                        <button type="button" class="btn btn-success btn-add-info"><a href="{% url 'addCustomer' %}" >Add</a> </button>
                    </div>
                </div>
            </div>
            <table class="table table-striped table-hover table-bordered">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>register_date <i class="fa fa-sort"></i></th>
                        <th>plan</th>
                        <th>campaign <i class="fa fa-sort"></i></th>

                        <th>option</th>
                        <th>first_name</th>
                        <th>last_name</th>
                        <th>gender</th>

                        <th>birthday</th>
                        <th>country</th>
                        <th>zip_code</th>
                        <th>state_province</th>

                        <th>city</th>
                        <th>street</th>
                        <th>phone_number</th>
                        <th>email</th>

                        <th>note</th>
                        <th>Action</th>
                        {% comment %} <th>image</th> {% endcomment %}
                    </tr>
                </thead>
                <tbody >
                    {% for item in Customers %}
                        <tr >
                            <td>{{ item.id }}</td>
                            <td>{{ item.register_date }}</td>
                            <td>{{ item.plan }}</td>
                            <td>{{ item.campaign }}</td>

                            <td>{{ item.option }}</td>
                            <td>{{ item.first_name }}</td>
                            <td>{{ item.last_name }}</td>
                            <td>{{ item.gender }}</td>

                            <td>{{ item.birthday }}</td>
                            <td>{{ item.country }}</td>
                            <td>{{ item.zip_code }}</td>
                            <td>{{ item.state_province }}</td>

                            <td>{{ item.city }}</td>
                            <td>{{ item.street }}</td>
                            <td>{{ item.phone_number }}</td>
                            <td>{{ item.email }}</td>

                            <td>{{ item.note }}</td>
                            <td>
                                <a onclick="showCustomer('{{ item.pk }}')"   href="#" class="view" title="View" data-toggle="tooltip"><i class="material-icons">&#xE417;</i></a>
                                <a onclick="showCustomer('{{ item.pk }}')"   href="#" class="edit" title="Edit" data-toggle="tooltip"><i class="material-icons">&#xE254;</i></a>
                                <form action="." method='POST'>
                                    {% csrf_token %}
                                    <a  onclick="showDeleteConfirmation('{{ item.pk }}')" href="#" class="delete" title="Delete" data-toggle="tooltip"><i class="material-icons">&#xE872;</i></a>
                                </form>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div class="clearfix">
                <div class="hint-text">Showing <b>5</b> out of <b>25</b> entries</div>
                <ul class="pagination">
                    <li class="page-item disabled"><a href="#"><i class="fa fa-angle-double-left"></i></a></li>
                    <li class="page-item"><a href="#" class="page-link">1</a></li>
                    <li class="page-item"><a href="#" class="page-link">2</a></li>
                    <li class="page-item active"><a href="#" class="page-link">3</a></li>
                    <li class="page-item"><a href="#" class="page-link">4</a></li>
                    <li class="page-item"><a href="#" class="page-link">5</a></li>
                    <li class="page-item"><a href="#" class="page-link"><i class="fa fa-angle-double-right"></i></a></li>
                </ul>
            </div>
        </div>
    </div>  
</div>       


<script>
    function showDeleteConfirmation(pk) {
        var isConfirmed = confirm("Are you sure you want to delete record with name " + name + "?");

        // Nếu isConfirmed là true (nghĩa là người dùng đã bấm OK), thực hiện chuyển hướng hoặc gọi hàm xóa
        if (isConfirmed) {
            // Bạn có thể chuyển hướng hoặc gọi hàm xóa ở đây, ví dụ:
            window.location.href = "{% url 'delete_customer' pk=0 %}".replace('0', pk);
        } else {
            // Người dùng bấm Cancel, không làm gì cả
        }
    }

    function showCustomer(pk) {
        window.location.href = "{% url 'show_customer' pk=0 %}".replace('0', pk);
    }
</script>

{% endblock %}

